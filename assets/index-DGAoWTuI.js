(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();let c=[];const u="HABIT_KEY";let l;const s={menu:document.querySelector(".menu__list"),header:{h1:document.querySelector(".h1"),progressPercent:document.querySelector(".progress__percent"),progressCoverBar:document.querySelector(".progress__coverBar")},content:{daysContainer:document.getElementById("days"),nextDay:document.querySelector(".habit__day")},popup:{index:document.getElementById("add-habit-popup"),iconField:document.querySelector(".popup__form input[name='icon']")}};function m(){const t=localStorage.getItem(u),e=JSON.parse(t);c=Array.isArray(e)?e:[]}function p(){localStorage.setItem(u,JSON.stringify(c))}function y(t){s.menu.innerHTML="";for(const e of c){const n=document.createElement("button");n.setAttribute("menu-habit-id",e.id),n.classList.add("menu__item"),n.innerHTML=` <img src="./src/assets/${e.icon}.svg" alt="${e.name}" >`,t.id===e.id&&n.classList.add("menu__item--active"),n.addEventListener("click",()=>d(e.id)),s.menu.appendChild(n)}}function f(t){s.header.h1.innerText=t.name;const e=t.days.length/t.target>1?100:t.days.length/t.target*100;s.header.progressPercent.innerText=e.toFixed(0)+"%",s.header.progressCoverBar.style.width=`${e}%`}function h(t){s.content.daysContainer.innerHTML="",t.days.forEach((e,n)=>{const i=document.createElement("div");i.classList.add("habit"),i.innerHTML=`<div class="habit__day"> Day ${n+1}</div>
    <div class="habit__comment">${e.comment}</div>
    <button class="habit__delete" onclick="deleteDay(${n})">
    <img src="./src/assets/delete.svg" alt="Delete day ${n+1}" />
    </button>`,i.querySelector(".habit__delete").addEventListener("click",()=>g(n)),s.content.daysContainer.appendChild(i)}),s.content.nextDay.innerHTML=`Day ${t.days.length+1}`}function d(t){l=t;const e=c.find(n=>n.id===t);e&&(document.location.replace(document.location.pathname+"#"+t),y(e),f(e),h(e))}function g(t){c=c.map(e=>e.id===l?(e.days.splice(t,1),{...e,days:e.days}):e),d(l),p()}s.header.h1.addEventListener("click",()=>{});(()=>{m();const t=Number(document.location.hash.replace("#","")),e=c.find(n=>n.id===t);d(e?e.id:c[0].id)})();
